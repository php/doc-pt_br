<?xml version="1.0" encoding="UTF-8"?>
<!-- EN-Revision: af4410a7e15898c3dbe83d6ea38246745ed9c6fb Maintainer: lucasnascimento Status: ready -->
<chapter xml:id="faq.build" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Desenvolvendo Problemas</title>
  <titleabbrev>Desenvolvendo Problemas</titleabbrev>

   <para>
     Esta seção reúne os erros mais comuns que ocorrem na
     tempo de compilação.
   </para>

  <qandaset>
   <qandaentry xml:id="faq.build.configure">
    <question>
     <para>
       Eu peguei a última versão do PHP usando o serviço do SVN anónimo,
       mas não há nenhum script de configuração!
     </para>
    </question>
    <answer>
     <para>
       Você tem que ter o pacote GNU autoconf instalado para que você possa
       gerar o script de configuração de <filename>configure.in</filename>.Basta executar
      <command>./buildconf</command>no diretório de nível mais alto após a obtenção
       as fontes do servidor SVN. (Além disso, a menos que você executar configure
       com o <literal>--enable-maintainer-mode</literal> opção, o
       script de configuração não irá começar automaticamente reconstruída quando
        o <filename>configure.in</filename>arquivo é atualizado, então você deve certificar-se de fazer isso
       manualmente quando você percebe <filename>configure.in</filename>mudou. Um sintoma
       do presente é encontrar coisas como variável @ @ em seu Makefile após
       configurar ou <filename>config.status</filename> quando é executado.)
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.configuring">
    <question>
     <para>
      Estou tendo problemas para configurar o PHP para trabalhar com Apache.
      Diz que não consegue encontrar <filename>httpd.h</filename>,mas é certo onde eu disse que é!
     </para>
    </question>
    <answer>
     <para>
      Você precisa dizer ao configure / script de configuração da localização do
      alto nível de sua árvore fonte do Apache. Isto significa que
      pretende especificar <option
      role="configure">--with-apache=/path/to/apache</option>
      and <emphasis>not</emphasis> <option
      role="configure">--with-apache=/path/to/apache/src</option>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.lex">
    <question>
     <para>
      Ao configurar o PHP (<literal>./configure</literal>), você se deparar com
      um erro semelhante ao seguinte:
     </para>
     <para>
      <screen>
       checar a próxima saída de arquivo root... ./configure: lex: command not found
       configure: error: não consegue encontrar a saída de Lex; desistir
      </screen>
     </para>
    </question>
    <answer>
     <para>     	
      Não deixe de ler a <link linkend="install.unix">instalação</link>
      instruções cuidadosamente e note que você precisa de ambos flex e bison
      instalado para compilar o PHP. Dependendo da configuração que irá instalar
      bison e flex a partir de qualquer fonte ou um pacote, como um RPM.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.apache-sharedcore">
    <question>
     <para>
      Quando tento iniciar o Apache, recebo a seguinte mensagem:
     </para>
     <para>
      <screen>
       deslocalização de erro fatal: file / path/to/libphp4.so:
       ap_block_alarms símbolo: O símbolo de referência não encontrada
      </screen>
     </para>
    </question>
    <answer>
     <para>
      Esse erro geralmente aparece quando um compila o Apache
      programa nuclear como uma biblioteca DSO para uso compartilhado. Tente
      apache reconfigurar, tornando-se usar pelo menos
      seguintes bandeiras:
     </para>
     <para>
      <screen>
      --enable-shared=max --enable-rule=SHARED_CORE
      </screen>
     </para>
     <para>
      Para obter mais informações, leia o nível superior Apache
      <filename> INSTALL </filename> ou o Apache
      <link xlink:href="&url.apachedso;">página DSO manual</link>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.not-found">
    <question>
     <para>
      Quando eu executar o configure, ele diz que não pode encontrar o
      incluir arquivos ou a biblioteca de GD, gdbm, ou algum outro pacote!
     </para>
    </question>
    <answer>
     <para>
      Você pode fazer o script de configuração procura por arquivos de cabeçalho e bibliotecas
      em locais não-padrão, especificando parâmetros adicionais para passar para
      o pré-processador C e linker, tais como:
      <programlisting>
<![CDATA[
    CPPFLAGS=-I/path/to/include LDFLAGS=-L/path/to/library ./configure
]]>
      </programlisting>
      If you're using a csh-variant for your login shell (why?), it would be:
      <programlisting>
<![CDATA[
    env CPPFLAGS=-I/path/to/include LDFLAGS=-L/path/to/library ./configure
]]>
      </programlisting>
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.yytname">
    <question>
     <para>
      Quando se está compilando os arquivos <filename>language-parser.tab.c</filename>, me devolve um erro
      que diz <literal>yytname undeclared</literal>.
     </para>
    </question>
    <answer>
     <para>
      Você precisa atualizar sua versão do Bison. Você pode encontrar a última versão
      em <link xlink:href="&url.bison;">&url.bison;</link>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.link">
    <question>
     <para>
      Quando eu executo <command>make</command>, parace rodar bem mas então falha quando tenta
      linkar a applicação final, queixando-se que não consegue encontrar alguns arquivos.
     </para>
    </question>
    <answer>
     <para>
      Algumas versões antigas de make que não colocam corretmente a versão
      compilada dos arquivos nos diretórios das funções dentro do mesmo
      diretório. Tente rodar <command>cp *.o functions</command> e então
      execute novamente <command>make</command> para ver se isso ajuda. Se não ajudar, você realmente deve
      atualizar para uma versão mais recente de GNU make.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.undefined">
    <question>
     <para>
      Quando linkando o PHP, ele reclama de um número de referências indefinidas.
     </para>
    </question>
    <answer>
     <para>
      De uma olhada na linha do link e tenha certeza que todas as bibliotecas
      apropriadas estão sendo incluidas no final. É comum que talvez você tenha
      esquecidos os '-ldl' e qualquer biblioteca requerida para qualquer suporte de banco de dados
      que você incluiu.
     </para>
     <para>
      Se você estiver ligado ao Apache 1.2.x, você se lembrou de adicionar a
      informação apropriada para a linha EXTRA_LIBS do arquivo de
      configuração e reiniciou o script de configuração do Apache? Veja o <link
       linkend="install">Capítulo de instalação</link> para mais informações.
     </para>
     <para>
      Algumas pessoas também tem reportado que elas tem que adicionar '-ldl' imediatamente
      seguido de <filename>libphp4.a</filename> quando ligado com o Apache.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.Apache">
    <question>
     <para>
      Eu não posso entender como construir PHP com Apache 1.3.
     </para>
    </question>
    <answer>
     <para>
      Isso é na verdade muito fácil.  Siga esses passos cuidadosamente:
      <itemizedlist>
       <listitem>
        <simpara>
         Obtenha a distribuição da última versão do Apache 1.3 no link
         <link xlink:href="&url.apache.source;">&url.apache.source;</link>.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Ungzip e descompacte em algum lugar, por exemplo
         <filename>/usr/local/src/apache-1.3</filename>.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Compile o PHP rodando primeiramente
         <command>./configure --with-apache=/&lt;path&gt;/apache-1.3</command>
         (substitua &lt;path&gt; pelo caminho atual do seu diretório apache-1.3.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Digite <command>make</command> seguido por <command>make install</command>
         para desenvolver o PHP e copiar os arquivos necessários para a árvore de distribuição do Apache.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Troque os diretórios dentro do seu diretório <filename>/&lt;path&gt;/apache-1.3/src</filename>
         e edite o arquivo <filename>Configuration</filename>.
         Adicione ao arquivo:
         <literal>AddModule modules/php4/libphp4.a</literal>.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Digite: <command>./configure</command> seguido de <literal>make</literal>.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Você deve ter agora um binário com PHP ativado!
        </simpara>
       </listitem>
      </itemizedlist>
     </para>
     <para>
      <emphasis>Nota:</emphasis> Você pode também usar o novo script Apache
      <literal>./configure</literal>. Veja as instruções no arquivo
      <literal>README.configure</literal> o qual faz parte da 
      sua distribuição Apache. Veja também no arquivo <filename>INSTALL</filename>
      na distrubuição PHP.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.not-running">
    <question>
     <para>
      Eu segui todos os passos da istalação do modulo da versão do Apache no
      Unix, e meus scripts PHP são mostrados no meu navegador ou sou interrogado para
      salvar os arquivos.
     </para>
    </question>
    <answer>
     <para>
      Isso significa que o modulo do PHP não esta sendo chamaado por alguma razão.
      Três coisas para se checar antes de pedir por mais ajuda:
      <itemizedlist>
       <listitem>
        <simpara>
         Tenha certeza que o binário httpd que você esta executndo é o
         que você acabou de construir. Para fazer isso, tente executar:
          <literal>/caminho/para/binário/httpd -l</literal>
        </simpara>
        <simpara>
         Se você não vê <filename>mod_php4.c</filename> constantes, então
         você não estiver executando o binário do direito. Encontrar e instalar o
         binário correto.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Certifique-se de ter adicionado o correto Mime Type em um dos seus
         arquivos <literal>.conf do Apache</literal>. Deve-se:
         <literal>AddType application / x-httpd-php. php </literal>
        </simpara>
        <simpara> 
         Também certifique-se que esta linha AddType não está escondido dentro de uma
         bloco &lt;Virtualhost&gt; ou &lt;Directory&gt; que
         impedi-lo de aplicação para a localização de seu script de teste.
        </simpara>
       </listitem>
       <listitem>
        <simpara>
         Finalmente, a localização padrão dos arquivos de configuração do Apache
         mudou entre o Apache 1.2 e Apache 1.3. Você deve verificar a
         certifique-se que o arquivo de configuração que você está adicionando o AddType
         linha para que realmente está sendo lido. Você pode colocar um óbvio erro de sintaxe
         em seu arquivo &httpd.conf; ou alguma outra mudança evidente que
         dizer se o arquivo estiver sendo lido corretamente.
        </simpara>
       </listitem>
      </itemizedlist>
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.activate-module">
    <question>
     <para>
      la diz para usar: <literal> - activate-module = src/modules/php4/libphp4.a </literal>,
       mas esse arquivo não existe, então mudei para
       <literal> - activate-module = src/modules/php4/libmodphp4.a </literal> e
       não funciona!? O que está acontecendo?
     </para>
    </question>
    <answer>
     <para>
      Note que o libphp4.a <filename> </filename> não é suposto existir. O
       processo apache irá criá-lo!
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.ansi">
    <question>
     <para>
      Quando tento compilar o Apache com o PHP como um módulo estático usando
       <literal> - activate-module = src/modules/php4/libphp4.a </literal>
       ele diz-me que o meu compilador não é compatível com ANSI.
     </para>
    </question>
    <answer>
     <para>
      Esta é uma mensagem de erro enganosas da Apache que foi corrigido
       nas versões mais recentes.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.apxs">
    <question>
     <para>
      Quando tento compilar o PHP usando <option
       role = "configure">--with-apxs</option> Recebo mensagens de erro estranha.
     </para>
    </question>
    <answer>
     <para>
      Há três coisas para buscar aqui. Em primeiro lugar, por alguma razão
       Apache quando constrói o script Perl apxs, às vezes acaba
       ficando de fora o compilador adequado e variáveis bandeiras.
       Encontre o seu script apxs (tente o comando <command> que apxs </command>),
       às vezes é encontrado em <filename> / usr / local / apache / bin / apxs </filename>
       ou <filename> / usr / sbin / apxs </filename>.
       Abri-lo e verificar se há linhas semelhantes a estas:
      <programlisting>
<![CDATA[
my $CFG_CFLAGS_SHLIB  = ' ';          # substituted via Makefile.tmpl
my $CFG_LD_SHLIB      = ' ';          # substituted via Makefile.tmpl
my $CFG_LDFLAGS_SHLIB = ' ';          # substituted via Makefile.tmpl
]]>
      </programlisting>
       Se é isso que você vê, você encontrou o seu problema. Podem
       contenham apenas espaços ou outros valores incorretos, como 'q ()'. Alterar
       estas linhas para dizer:
      <programlisting>
<![CDATA[
my $CFG_CFLAGS_SHLIB  = '-fpic -DSHARED_MODULE'; # substituted via Makefile.tmpl
my $CFG_LD_SHLIB      = 'gcc';                   # substituted via Makefile.tmpl
my $CFG_LDFLAGS_SHLIB = q(-shared);              # substituted via Makefile.tmpl 
]]>
      </programlisting>
       O segundo problema possível só deve ser um problema no Red Hat 6.1
       e 6.2. O script apxs navios Red Hat está quebrado. Procure por esta linha:
      <programlisting>
<![CDATA[
my $CFG_LIBEXECDIR    = 'modules';         # substituted via APACI install
]]>
      </programlisting>
      Se você vê a linha acima, mude para isto:
      <programlisting>
<![CDATA[
my $CFG_LIBEXECDIR    = '/usr/lib/apache'; # substituted via APACI install
]]>
      </programlisting>
       	 Finalmente, se você reconfigurar / Apache reinstalar, adicionar um <command> make clean </command>
        para o processo depois <command>. / configure </command> e antes <command> make </command>.
     </para>
    </answer>
   </qandaentry>

   <qandaentry xml:id="faq.build.microtime">
    <question>
     <para>
      Durante <command> make </command>, eu recebo erros no microtime,
       e um monte de <literal> RUSAGE_ </literal> material.
    </para>
    </question>
    <answer>
     <para>
      Durante o <command> make </command> parcela da instalação,
       Se você encontrar problemas que parecem semelhantes a este:
      <programlisting>
<![CDATA[
microtime.c: In function `php_if_getrusage':
microtime.c:94: storage size of `usg' isn't known
microtime.c:97: `RUSAGE_SELF' undeclared (first use in this function)
microtime.c:97: (Each undeclared identifier is reported only once
microtime.c:97: for each function it appears in.)
microtime.c:103: `RUSAGE_CHILDREN' undeclared (first use in this function)
make[3]: *** [microtime.lo] Error 1
make[3]: Leaving directory `/home/master/php-4.0.1/ext/standard'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/master/php-4.0.1/ext/standard'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/master/php-4.0.1/ext'
make: *** [all-recursive] Error 1
]]>
      </programlisting>
     </para>
     <para>
       Seu sistema está falido. É preciso corrigir o seu <filename>/usr/include</filename> por
       instalação de um pacote glibc-devel glibc que corresponde ao seu. Isto tem
       absolutamente nada a ver com o PHP. Para provar isso a si mesmo, tente este
       teste simples:
     <programlisting>
<![CDATA[
$ cat >test.c <<X
#include <sys/resource.h>
X
$ gcc -E test.c >/dev/null
]]>
      </programlisting>
      	Se isso mostrar os erros, você conhece o seu arquivos de inclusão são desarrumados. 
     </para>
    </answer>
   </qandaentry>
   
   <qandaentry xml:id="faq.build.mysql.tempnam">
    <question>
     <para>
      Ao compilar o PHP com MySQL, configurar corre bem, mas durante
       <literal> fazer </literal> I get um erro semelhante ao seguinte:
       <emphasis> ext / mysql / libmysql / my_tempnam.o (texto. +0 x46):Em função
       my_tempnam ': / php4/ext/mysql/libmysql/my_tempnam.c: 103: o
       mkstemp utilizando de tempnam 'é perigoso, melhor' </emphasis>,
       O que está errado ?
     </para>
    </question>
    <answer>
     <para>
       Primeiramente, é importante perceber que este é um <literal>
       Warning </literal> e não um erro fatal. Porque este é
       muitas vezes a saída vista pela última vez durante <literal> fazer </literal>,
       Ela pode parecer um erro fatal, mas não é. Claro que, se
       você define o seu compilador para morrer na avisos, ele vai. Além disso
       ter em mente que suportam o MySQL é ativado por padrão.
     </para>
     <note>
      <para>
       	A partir do PHP 4.3.2, você também verá o seguinte texto depois
        a compilação (make) conclui:
      </para>
      <para>
       <screen>
          Construção completa.
         (É seguro ignorar avisos sobre tempnam e tmpnam).
       </screen>
      </para>
     </note>
    </answer>
   </qandaentry>
   
   <qandaentry xml:id="faq.build.upgrade">
    <question>
     <para>
       Eu quero atualizar o meu PHP. Onde posso encontrar o <command>. / Configure </command>
       linha que foi usada para construir a minha instalação atual do PHP?
     </para>
    </question>
    <answer>
     <para>
       Ou você olhar para arquivo config.nice, na árvore fonte do seu atual do PHP
       instalação ou, se este não estiver disponível, basta executar um 
      <programlisting role="php">
<![CDATA[
       <?php phpinfo(); ?> 
]]>
      </programlisting>
       script. Em cima da saída do <command>./configure</command> line, que foi usado
       para construir esta instalação do PHP é mostrado.
     </para>
    </answer>
   </qandaentry>
   
   <qandaentry xml:id="faq.build.gdlibs">
    <question>
     <para>
      	Quando compilar o PHP com a biblioteca GD é estranho ou dá erros de compilação
       segfaults ou em execução.
     </para>
    </question>
    <answer>
     <para>
      Certifique-se de sua biblioteca GD e PHP estão ligadas contra a mesma função
       bibliotecas (libpng por exemplo).
     </para>
    </answer>
   </qandaentry>   
   
   <qandaentry xml:id="faq.installation.needgnu">
    <question>
     <para>
      	Ao compilar o PHP eu recebo erros aparentemente aleatória, como ele reage.
       Estou usando o Solaris se o que importa.
     </para>
    </question>
    <answer>
     <para>
      Usando o não-utilitários GNU ao compilar o PHP pode causar problemas. Ser
       Certifique-se de usar as ferramentas GNU, a fim de ter certeza de que irá compilar PHP
       trabalho. Por exemplo, no Solaris, usando o SunOS BSD-compatible
       ou versões do Solaris <literal> sed </literal> não vai funcionar, mas usando
       GNU ou Sun POSIX (XPG4) versões do <literal> sed </literal> will
       trabalho. Links: <link xlink:href="&url.sed;"> GNU sed </link>,
       <link xlink:href="&url.flex;"> GNU flex </link> e
       <link xlink:href="&url.bison;"> bison </link>.
     </para>
    </answer>
   </qandaentry>
  </qandaset>
 </chapter>

	
<!-- Conserve este comentário no final do arquivo
As variáveis locais:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
